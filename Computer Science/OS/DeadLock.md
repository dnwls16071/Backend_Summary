# DeadLock

### ✅데드락(DeadLock)🌟

<img src="https://velog.velcdn.com/images%2Fdd9s2%2Fpost%2Fcfcd4a67-265f-42c5-accc-a76a7a546273%2Fimage.png">

> 일련의 프로세스들이 서로가 가진 자원을 기다리며 무한정 대기하는 상태
> 
> Resource(자원) : 하드웨어, 소프트웨어 등을 포함하는 개념, 프로세스가 자원을 사용하는 절차

* DeadLock의 발생 조건 4가지
  * 상호 배제 : 매 순간 하나의 프로세스만이 실행될 수 있음
  * 점유와 대기 : 프로세스가 자원을 점유하고 있으면서 다른 프로세스에게 할당된 자원을 기다릴 때 보유 자원을 놓지 않고 기다리는 것
  * 비선점 : 실행 중인 프로세스의 자원을 빼앗을 수 없음
  * 순환 대기 : 자원을 기다리는 프로세스 간에 사이클이 형성됨
* 위의 4가지 조건 중 하나라도 만족하지 않게 된다면 데드락을 해결할 수 있다.

### ✅자원 할당 그래프

<img src="https://velog.velcdn.com/images/youngju307/post/f0fbc0c8-ce63-47fc-9d10-edf41445842d/image.png">

### ✅데드락 처리 방법🌟

* 예방(Prevention) : 자원 할당 시 데드락의 4가지 필요 조건 중 어느 하나가 만족하지 않도록 하는 것(자원 낭비가 심함)
  * 상호 배제 부정 : 여러 프로세스가 공유 자원 사용
  * 점유대기 부정 : 프로세스 실행 전 모든 자원을 할당
  * 비선점 부정(선점 인정) : 자원 점유 중 프로세스가 다른 자원을 요구할 때 가진 자원을 반납
  * 순환 대기 부정 : 자원에 고유 번호를 할당한 후 순서대로 자원 요구
* 회피(Avoidance) : 자원 요청에 대한 부가적인 정보를 이용해서 DeadLock의 가능성이 없는 경우에만 자원을 할당
  * 은행원 알고리즘 : 프로세스의 자원 요청 시 시스템은 자원을 할당한 후에도 안정 상태로 남아있는지를 사전에 파악한 후 교착 상태 회피
* 회복과 탐지(Detection & Recovery) : 데드락 발생은 허용하되 그에 대한 Detection 루틴을 두어 데드락 발견 시 Recover
  * 탐지 : 자원 할당 그래프를 통해 탐지
  * 회복 : 교착 상태를 일으킨 프로세스를 종료하거나 할당된 자원을 해제
    * **프로세스 종료 방법** : 교착 상태 프로세스 모두 중지 / 교착 상태가 제거될 때까지 하나씩 프로세스를 중지
    * **자원 선점 방법** : 교착 상태 프로세스가 점유하는 자원을 선점해 다른 프로세스에게 할당 / 우선순위가 낮은 프로세스나 수행 횟수가 적은 프로세스 위주로 프로세스 자원 설정
* 무시(Ignorance) : 데드락을 시스템이 책임지지 않음