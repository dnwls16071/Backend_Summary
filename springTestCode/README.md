# í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ê°€ì´ë“œ

### âœ…Lombok(ì‚¬ìš© ê°€ì´ë“œ)

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* @Data, @Setter, @AllArgsConstructor ì‚¬ìš© ì§€ì–‘í•˜ì.
* ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì‹œ @ToString ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ ë°œìƒ

-----------------------
</details>

### âœ…DisplayNameì€ ì„¬ì„¸í•˜ê²Œ ì§€ì–´ë¼.

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì‹œ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì´ë¦„ì„ ì§€ì„ ìˆ˜ ìˆëŠ”ë° ì´ ë•Œ, ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ ë°”ë¡œ `@DisplayName`ì´ë‹¤.
* í…ŒìŠ¤íŠ¸ í–‰ìœ„ì— ëŒ€í•œ ê²°ê³¼ê¹Œì§€ ê°™ì´ ê¸°ìˆ í•œë‹¤.
* ë„ë©”ì¸ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í•œì¸µ ì¶”ìƒí™”ëœ ë‚´ìš©ì„ ë‹´ëŠ”ë‹¤.(ë©”ì„œë“œ ìì²´ ê´€ì ë³´ë‹¤ ë„ë©”ì¸ ì •ì±… ê´€ì ìœ¼ë¡œ)
* í…ŒìŠ¤íŠ¸ í˜„ìƒì„ ì¤‘ì ìœ¼ë¡œ ê¸°ìˆ í•˜ì§€ ë§ ê²ƒ

> ### í…ŒìŠ¤íŠ¸ ì½”ë“œ ë„¤ì´ë° ì˜ˆì‹œ
> 
> * ì˜ˆì‹œ1 : ìŒë£Œë¥¼ 1ê°œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. â†’ ìŒë£Œë¥¼ 1ê°œ ì¶”ê°€í•˜ë©´ ì£¼ë¬¸ ëª©ë¡ì— ë‹´ê¸´ë‹¤.
> * ì˜ˆì‹œ2 : íŠ¹ì • ì‹œê°„ ì´ì „ì— ì£¼ë¬¸ì„ ìƒì„±í•˜ë©´ ì‹¤íŒ¨í•œë‹¤. â†’ ì˜ì—… ì‹œì‘ ì‹œê°„ ì´ì „ì—ëŠ” ì£¼ë¬¸ì„ ìƒì„±í•  ìˆ˜ ì—†ë‹¤.

-----------------------
</details>

### âœ…BDD(Behavior Driven Development)

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* TDDì—ì„œ íŒŒìƒëœ ê¸°ë²•
* í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ì§‘ì¤‘í•˜ê¸°ë³´ë‹¤ëŠ” ì‹œë‚˜ë¦¬ì˜¤ì— ê¸°ë°˜í•œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤(TC) ìì²´ì— ì§‘ì¤‘í•˜ì—¬ í…ŒìŠ¤íŠ¸í•œë‹¤.
* ê°œë°œìê°€ ì•„ë‹Œ ì‚¬ëŒì´ ë´ë„ ì´í•´í•  ìˆ˜ ìˆì„ ì •ë„ì˜ ì¶”ìƒí™” ìˆ˜ì¤€ì„ ê¶Œì¥í•œë‹¤.

-----------------------
</details>

### âœ…Given - When - Then íŒ¨í„´ì´ë€?

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* Given : ì‹œë‚˜ë¦¬ì˜¤ ì§„í–‰ì— í•„ìš”í•œ ëª¨ë“  ì¤€ë¹„ ê³¼ì •(ê°ì²´ ê°’, ìƒíƒœ ë“±)
* When : ì‹œë‚˜ë¦¬ì˜¤ í–‰ë™ ì§„í–‰
* Then : ì‹œë‚˜ë¦¬ì˜¤ ì§„í–‰ì— ëŒ€í•œ ê²°ê³¼ ëª…ì‹œ, ê²€ì¦

-----------------------
</details>

### âœ…Persistence Layer í…ŒìŠ¤íŠ¸

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* Persistence Layer(ì˜ì†ì„± ê³„ì¸µ)

  * DBì™€ì˜ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ê³„ì¸µ
  * Repository/DAOê°€ ì´ ê³„ì¸µì— ìœ„ì¹˜

> Persistence Layer í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ˆì‹œ

```java
@ActiveProfiles(profiles = "test")
@DataJpaTest
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
class ProductRepositoryTest {

	@Autowired private ProductRepository productRepository;

	@DisplayName("ì›í•˜ëŠ” íŒë§¤ìƒíƒœë¥¼ ê°€ì§„ ìƒí’ˆë“¤ì„ ì¡°íšŒí•œë‹¤.")
	@Test
	void ì›í•˜ëŠ”_íŒë§¤ìƒíƒœë¥¼_ê°€ì§„_ìƒí’ˆë“¤ì„_ì¡°íšŒí•œë‹¤() {
		// given
		Product product1 = Product.createProduct("001", HANDMADE, SELLING, "ì•„ë©”ë¦¬ì¹´ë…¸", 4000);
		Product product2 = Product.createProduct("002", HANDMADE, HOLD, "ì¹´í˜ë¼ë–¼", 4500);
		Product product3 = Product.createProduct("003", HANDMADE, STOP_SELLING, "íŒ¥ë¹™ìˆ˜", 5000);

		productRepository.saveAll(List.of(product1, product2, product3));

		// when
		List<Product> products = productRepository.findAllBySellingStatusIn(List.of(SELLING, HOLD));

		// then
		assertThat(products).hasSize(2)
				.extracting("productNumber", "name", "sellingStatus")
				.containsExactlyInAnyOrder(
						tuple("001", "ì•„ë©”ë¦¬ì¹´ë…¸", SELLING),
						tuple("002", "ì¹´í˜ë¼ë–¼", HOLD)
				);
	}
}
```

> Persistence Layer í…ŒìŠ¤íŠ¸ ì½”ë“œ ì„¤ëª…
> * `@DataJpaTest` ì–´ë…¸í…Œì´ì…˜ì˜ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ ë‚´ì¥ëœ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤(ex. H2) ì¦‰, EmbeddedDatabaseë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •ëœë‹¤.
> * í•˜ì§€ë§Œ ì´ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ì—ì„œ MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ `@DataJpaTest` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
> * JPA ê´€ë ¨ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•Œ `@DataJpaTest` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ì§„í–‰í•˜ë©´ í•„ìš”í•œ Configurationë§Œ ì£¼ì…ë°›ì•„ì„œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆê³  ë¡¤ë°±ë„ ë˜ì–´ ê°„ë‹¨í•˜ê²Œ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.
> * ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë ¤ë©´ AutoConfigurationTestDatabaseë¥¼ ë®ì–´ì¨ì„œ ë‚´ì¥ëœ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ ëŒ€ì‹  ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.
>
> Persistence Layer
> * Data Accessì˜ ì—­í• 
> * ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ê³µ ë¡œì§ì´ í¬í•¨ë˜ì–´ì„  ì•ˆ ëœë‹¤. Dataì— ëŒ€í•œ CRUDì—ë§Œ ì§‘ì¤‘í•´ì•¼í•œë‹¤.

-----------------------
</details>

### âœ…@Transactional ì–´ë…¸í…Œì´ì…˜

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* `@Transactional` ì–´ë…¸í…Œì´ì…˜ì€ íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.
* `@Transactional` ì–´ë…¸í…Œì´ì…˜ì—ëŠ” ì˜µì…˜ì´ ì¡´ì¬í•œë‹¤.
  * readOnly = true
    * ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜
    * CRUDì—ì„œ CUDê°€ ë™ì‘X, Rë§Œ ë™ì‘O
    * JPAì—ì„œ ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ ìŠ¤ëƒ…ìƒ· ì €ì¥, ë³€ê²½ ê°ì§€ X â†’ ì•½ê°„ì˜ ì„±ëŠ¥ í–¥ìƒ
    * CQRS(Command and Query Responsibility Segregation) : ë°ì´í„° ì €ì¥ì†Œë¡œë¶€í„°ì˜ ì½ê¸°ì™€ ì—…ë°ì´íŠ¸ ì‘ì—…ì„ ë¶„ë¦¬í•˜ëŠ” íŒ¨í„´ì„ ì˜ ì§€í‚¬ ìˆ˜ ìˆë‹¤.

â­â­ ì¶”ì²œ ì½”ë“œ ìŠ¤íƒ€ì¼ : í´ë˜ìŠ¤ ë‚´ì— ìˆëŠ” ëª¨ë“  í–‰ìœ„ì— ëŒ€í•´ì„œ readOnly = trueë¡œ ê°€ì ¸ê°€ë˜ CUD ì‘ì—…ì˜ ê²½ìš°ì—ëŠ” @Transactionalì„ ë³„ë„ë¡œ ê¸°ì¬

-----------------------
</details>

### âœ…Presentation Layer í…ŒìŠ¤íŠ¸

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

```java
@WebMvcTest(ProductApiController.class)
class ProductApiControllerTest {

	@Autowired private MockMvc mockMvc;
	@Autowired private ObjectMapper objectMapper;

	@MockBean private ProductService productService;

	@DisplayName("ì‹ ê·œ ìƒí’ˆì„ ë“±ë¡í•œë‹¤.")
	@Test
	void createProduct() throws Exception {
		// given
		ProductRequest request = ProductRequest.builder()
				.type(HANDMADE)
				.sellingStatus(SELLING)
				.name("ì•„ë©”ë¦¬ì¹´ë…¸")
				.price(4000)
				.build();

		mockMvc.perform(MockMvcRequestBuilders.post(
						"/api/v1/products/new")
				.content(objectMapper.writeValueAsString(request))
				.contentType(MediaType.APPLICATION_JSON));
	}

	@DisplayName("ì‹ ê·œ ìƒí’ˆ ë“±ë¡ ì‹œ ìƒí’ˆ íƒ€ì…ì€ í•„ìˆ˜ì—¬ì•¼ í•œë‹¤.")
	@Test
	void createProductWithoutType() throws Exception {
		// given
		ProductRequest request = ProductRequest.builder()
				.sellingStatus(SELLING)
				.name("ì•„ë©”ë¦¬ì¹´ë…¸")
				.price(4000)
				.build();

		// when & then
		mockMvc.perform(MockMvcRequestBuilders.post(
				"/api/v1/products/new")
						.content(objectMapper.writeValueAsString(request))
						.contentType(MediaType.APPLICATION_JSON)
				)
				.andDo(print())
				.andExpect(status().isBadRequest())
				.andExpect(jsonPath("$.code").value("400"))
				.andExpect(jsonPath("$.message").value("ìƒí’ˆ íƒ€ì…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."))
				.andExpect(jsonPath("$.httpStatus").value("BAD_REQUEST"))
				.andExpect(jsonPath("$.data").isEmpty());
	}

	@DisplayName("ì‹ ê·œ ìƒí’ˆ ë“±ë¡ ì‹œ ìƒí’ˆ íŒë§¤ìƒíƒœëŠ” í•„ìˆ˜ì—¬ì•¼ í•œë‹¤.")
	@Test
	void createProductWithoutSellingStatus() throws Exception {
		// given
		ProductRequest request = ProductRequest.builder()
				.type(HANDMADE)
				.name("ì•„ë©”ë¦¬ì¹´ë…¸")
				.price(4000)
				.build();


		// when & then
		mockMvc.perform(MockMvcRequestBuilders.post(
								"/api/v1/products/new")
						.content(objectMapper.writeValueAsString(request))
						.contentType(MediaType.APPLICATION_JSON)
				)
				.andDo(print())
				.andExpect(status().isBadRequest())
				.andExpect(jsonPath("$.code").value("400"))
				.andExpect(jsonPath("$.message").value("ìƒí’ˆ íŒë§¤ìƒíƒœëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤."))
				.andExpect(jsonPath("$.httpStatus").value("BAD_REQUEST"))
				.andExpect(jsonPath("$.data").isEmpty());
	}

	@DisplayName("ì‹ ê·œ ìƒí’ˆ ë“±ë¡ ì‹œ ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì—¬ì•¼ í•œë‹¤.")
	@Test
	void createProductWithoutName() throws Exception {
		// given
		ProductRequest request = ProductRequest.builder()
				.sellingStatus(SELLING)
				.type(HANDMADE)
				.price(4000)
				.build();


		// when & then
		mockMvc.perform(MockMvcRequestBuilders.post(
								"/api/v1/products/new")
						.content(objectMapper.writeValueAsString(request))
						.contentType(MediaType.APPLICATION_JSON)
				)
				.andDo(print())
				.andExpect(status().isBadRequest())
				.andExpect(jsonPath("$.code").value("400"))
				.andExpect(jsonPath("$.message").value("ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."))
				.andExpect(jsonPath("$.httpStatus").value("BAD_REQUEST"))
				.andExpect(jsonPath("$.data").isEmpty());
	}

	@DisplayName("ì‹ ê·œ ìƒí’ˆ ë“±ë¡ ì‹œ ìƒí’ˆ ê°€ê²©ì€ ì–‘ìˆ˜ì—¬ì•¼ í•œë‹¤.")
	@Test
	void createProductWithZeroPrice() throws Exception {
		// given
		ProductRequest request = ProductRequest.builder()
				.type(HANDMADE)
				.sellingStatus(SELLING)
				.name("ì•„ë©”ë¦¬ì¹´ë…¸")
				.price(-8000)
				.build();

		// when & then
		mockMvc.perform(MockMvcRequestBuilders.post(
								"/api/v1/products/new")
						.content(objectMapper.writeValueAsString(request))
						.contentType(MediaType.APPLICATION_JSON)
				)
				.andDo(print())
				.andExpect(status().isBadRequest())
				.andExpect(jsonPath("$.code").value("400"))
				.andExpect(jsonPath("$.message").value("ìƒí’ˆ ê°€ê²©ì€ ì–‘ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤."))
				.andExpect(jsonPath("$.httpStatus").value("BAD_REQUEST"))
				.andExpect(jsonPath("$.data").isEmpty());
	}

	@DisplayName("íŒë§¤ ìƒí’ˆì„ ì¡°íšŒí•œë‹¤.")
	@Test
	void getSellingProducts() throws Exception {
		// given
		List<ProductResponse> result = List.of();
		when(productService.getSellingProducts()).thenReturn(result);

		// when & then
		mockMvc.perform(MockMvcRequestBuilders
				.get("/api/v1/products/selling")
		)
		.andDo(print())
		.andExpect(status().isOk())
		.andExpect(jsonPath("$.code").value("200"))
		.andExpect(jsonPath("$.message").value("OK"))
		.andExpect(jsonPath("$.httpStatus").value("OK"))
		.andExpect(jsonPath("$.data").isArray());
	}
}
```

* Presentation Layer í…ŒìŠ¤íŠ¸ì˜ ê²½ìš° ì™¸ë¶€ ì„¸ê³„ì˜ ìš”ì²­ì„ ê°€ì¥ ë¨¼ì € ë°›ëŠ” ê³„ì¸µì´ë‹¤.
* íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ ìµœì†Œí•œì˜ ê²€ì¦ì„ ìˆ˜í–‰í•œë‹¤.

-----------------------
</details>
 
### âœ…Controller ê³„ì¸µì—ì„œ ì‚¬ìš©ë˜ëŠ” DTOì™€ Service ê³„ì¸µì—ì„œ ì‚¬ìš©ë˜ëŠ” DTOë¥¼ êµ¬ë¶„í•´ì•¼í•˜ëŠ” ì´ìœ 

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

> ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Separation of Concerns)
* Controller DTO : API ìš”ì²­/ì‘ë‹µì— íŠ¹í™”ëœ ë°ì´í„° êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆê³  ì´ ë°ì´í„°ì˜ ìœ íš¨ì„± ê²€ì¦ì„ ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤.
* Service DTO : ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ì— í•„ìš”í•œ ë°ì´í„° êµ¬ì¡°

> ê³„ì¸µ ê°„ ê²°í•©ë„ ê°ì†Œ
* ê° ê³„ì¸µì˜ DTOê°€ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©´ í•œ ê³„ì¸µì˜ ë³€ê²½ì´ ë‹¤ë¥¸ ê³„ì¸µì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê²Œ ëœë‹¤.
* API ìŠ¤í™ì´ ë³€ê²½ë˜ì–´ë„ Service ê³„ì¸µì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ë‹¤.

-----------------------
</details>

### âœ…Mock

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

```java
@SpringBootTest
class OrderStatisticsServiceTest {

	@Autowired private OrderStatisticsService orderStatisticsService;
	@Autowired private OrderProductRepository orderProductRepository;
	@Autowired private OrderRepository orderRepository;
	@Autowired private ProductRepository productRepository;
	@Autowired private MailSendRepository mailSendRepository;

	@MockBean private MailClient mailClient;

	@AfterEach
	void tearDown() {
		orderProductRepository.deleteAllInBatch();
		orderRepository.deleteAllInBatch();
		productRepository.deleteAllInBatch();
		mailSendRepository.deleteAllInBatch();
	}

	@DisplayName("ë§¤ì¶œ í†µê³„ ë©”ì¼ì„ ì „ì†¡í•œë‹¤.")
	@Test
	void sendOrderStatisticsMail() {
		// given
		LocalDateTime now = LocalDateTime.of(2023, 3, 5, 0, 0);

		Product product1 = Product.createProduct("001", HANDMADE, SELLING, "ì•„ë©”ë¦¬ì¹´ë…¸", 4000);
		Product product2 = Product.createProduct("002", HANDMADE, HOLD, "ì¹´í˜ë¼ë–¼", 4500);
		Product product3 = Product.createProduct("003", HANDMADE, STOP_SELLING, "íŒ¥ë¹™ìˆ˜", 5000);

		List<Product> products = List.of(product1, product2, product3);
		productRepository.saveAll(List.of(product1, product2, product3));

		createPaymentCompletedOrder(LocalDateTime.of(2023, 3, 4, 23, 59, 59), products);
		createPaymentCompletedOrder(now, products);
		createPaymentCompletedOrder(LocalDateTime.of(2023, 3, 5, 23, 59, 59), products);
		createPaymentCompletedOrder(LocalDateTime.of(2023, 3, 6, 0, 0), products);

		// stubbing
		when(mailClient.sendEmail(any(String.class), any(String.class), any(String.class), any(String.class)))
				.thenReturn(true);

		// when
		boolean result = orderStatisticsService.sendOrderStatisticsMail(LocalDate.of(2023, 3, 5), "test@test.com");

		// then
		assertThat(result).isTrue();

		List<MailSendHistory> histories = mailSendRepository.findAll();
		assertThat(histories).hasSize(1)
				.extracting("content")
				.containsExactlyInAnyOrder("ì´ ë§¤ì¶œí•©ê³„ëŠ” 27000ì›ì…ë‹ˆë‹¤.");
	}

	private Order createPaymentCompletedOrder(LocalDateTime now, List<Product> products) {
		Order order = Order.builder()
				.products(products)
				.orderStatus(OrderStatus.PAYMENT_COMPLETED)
				.registeredDateTime(now)
				.build();
		return orderRepository.save(order);
	}
}
```

* ë©”ì¼ ì „ì†¡ê³¼ ê°™ì€ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ë¥¼ íƒ€ëŠ” ê¸´ ì‘ì—…ì˜ ê²½ìš° ì‹¤ì œë¡œ íŠ¸ëœì­ì…˜ì— ì°¸ì—¬í•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ì„œë¹„ìŠ¤ì˜ ê²½ìš° íŠ¸ëœì­ì…˜ì„ ê±¸ì§€ ì•ŠëŠ”ê²Œ ì¢‹ë‹¤.
* ì™¸ë¶€ ì‹œìŠ¤í…œ API í˜¸ì¶œ ì‹œ(Ex. ê²°ì œ API ë“±) íŠ¸ëœì­ì…˜ì˜ ì œì–´ê°€ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš° íŠ¸ëœì­ì…˜ì„ ê±¸ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.
* ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œì˜ íŠ¸ëœì­ì…˜ì„ í¬í•¨í•˜ë©´ ì•ˆë˜ë©° ê° ì‹œìŠ¤í…œì˜ íŠ¸ëœì­ì…˜ ê²½ê³„ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•´ì•¼ í•œë‹¤.

-----------------------
</details>

### âœ…Test Double

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

* ìš©ì–´ ì •ë¦¬
  * Dummy : ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠëŠ” ê¹¡í†µ ê°ì²´
  * Fake : ë‹¨ìˆœí•œ í˜•íƒœë¡œ ë™ì¼í•œ ê¸°ëŠ¥ì€ ìˆ˜í–‰í•˜ë‚˜, í”„ë¡œë•ì…˜ì—ëŠ” ì“°ê¸° ë¶€ì¡±í•œ ê°ì²´(Ex. FakeRepository)
  * Stub : í…ŒìŠ¤íŠ¸ì—ì„œ ìš”ì²­í•œ ê²ƒì— ëŒ€í•´ ë¯¸ë¦¬ ì¤€ë¹„í•œ ê²°ê³¼ë¥¼ ì œê³µí•˜ëŠ” ê°ì²´, ê·¸ ì™¸ì—ëŠ” ì‘ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤.
  * Spy : Stubì´ë©´ì„œ í˜¸ì¶œëœ ë‚´ìš©ì„ ê¸°ë¡í•˜ì—¬ ë³´ì—¬ì¤„ ìˆ˜ ìˆëŠ” ê°ì²´, ì¼ë¶€ëŠ” ì‹¤ì œ ê°ì²´ì²˜ëŸ¼ ë™ì‘ì‹œí‚¤ê³  ì¼ë¶€ë§Œ Stubbing í•  ìˆ˜ ìˆë‹¤.
  * Mock : í–‰ìœ„ì— ëŒ€í•œ ê¸°ëŒ€ë¥¼ ëª…ì„¸í•˜ê³ , ê·¸ì— ë”°ë¼ ë™ì‘í•˜ë„ë¡ ë§Œë“¤ì–´ì§„ ê°ì²´

-----------------------
</details>

### âœ…@Mock, @Spy, @InjectMocks

<details>
   <summary> ì •ë¦¬í•œ ë‚´ìš© ë³´ê¸° (ğŸ‘ˆ Click)</summary>
<br />

```java
class MailServiceTest {

    @Mock private MailClient mailClient;			    // @Mock : ê°€ì§œ ê°ì²´ ìƒì„±
    @Mock private MailSendRepository mailSendRepository; 	    // @Mock : ê°€ì§œ ê°ì²´ ìƒì„±
    @InjectMocks private MailService mailService;	            // @InjectMocks : ê°€ì§œ Mock ê°ì²´ë“¤ì„ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì£¼ëŠ” ì—­í• 

    @DisplayName("ë©”ì¼ ì „ì†¡ í…ŒìŠ¤íŠ¸")
    @Test
    void sendMail() {
      // given
      when(mailClient.sendEmail(any(String.class), any(String.class), any(String.class), any(String.class)))
              .thenReturn(true);
  
      // when
      boolean result = mailService.sendEmail("", "", "", "");
      Mockito.verify(mailSendRepository, times(1)).save(any(MailSendHistory.class));
  
      // when & then
      assertThat(result).isTrue();
    }
  
    @DisplayName("ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸")
    @Test
    void sendMailFail() {
      // given
      when(mailClient.sendEmail(any(), any(), any(), any()))
              .thenThrow(new IllegalArgumentException("ë©”ì¼ ì „ì†¡"));
  
      // when & then
      assertThatThrownBy(() -> mailService.sendEmail("", "", "", ""))
              .isInstanceOf(IllegalArgumentException.class)
              .hasMessage("ë©”ì¼ ì „ì†¡");
    }
}
```

* Mock ê°ì²´ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±ì„ ìœ„í•œ í™˜ê²½ êµ¬ì¶•ì´ ë³µì¡í•œ ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” `ê°€ì§œ ê°ì²´`ë¥¼ ë§í•œë‹¤.
* Mock ê°ì²´ëŠ” í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ê°ì²´ê°€ ì˜ì¡´í•˜ëŠ” ê°ì²´ë¥¼ ê°€ì§œë¡œ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ê°ì²´ì˜ ì˜ì¡´ ê°ì²´ë¥¼ ëŒ€ì²´í•˜ëŠ” ê²ƒì„ ë§í•˜ë©° `@Mock` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
* `@InjectMock` ì–´ë…¸í…Œì´ì…˜ì€ `@Mock` ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ê°ì²´ì˜ ì˜ì¡´ ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

-----------------------
</details>